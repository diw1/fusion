"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[181],{58566:function(Me,E,a){a.r(E),a.d(E,{default:function(){return ne}});var Y=a(55888),U=a(34158),z=a(95407),R=a(26713),m=a(71230),f=a(15746),S=a(4393),y=a(56841),T=a(34749),P=a(45697),Z=a.n(P),g=a(67294),G=Object.defineProperty,A=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,p=(r,n,t)=>n in r?G(r,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[n]=t,W=(r,n)=>{for(var t in n||(n={}))k.call(n,t)&&p(r,t,n[t]);if(A)for(var t of A(n))H.call(n,t)&&p(r,t,n[t]);return r};const de=r=>React.createElement("svg",W({width:150,height:128,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},r),React.createElement("title",null,"ic_card_fall_down"),React.createElement("defs",null,React.createElement("path",{id:"fall_down_svg__a",d:"M.345.407h78.261v117.747H.345z"}),React.createElement("path",{id:"fall_down_svg__c",d:"M0 .253h28.32v27.864H0z"})),React.createElement("g",{fill:"none",fillRule:"evenodd"},React.createElement("g",{transform:"translate(43.57 4.458)"},React.createElement("mask",{id:"fall_down_svg__b",fill:"#fff"},React.createElement("use",{xlinkHref:"#fall_down_svg__a"})),React.createElement("path",{d:"M67.54 56.766c-11.06 5.102-22.42 9.44-33.935 13.361-2.035-6.481-3.192-11.953-4.88-19.735-.702-3.233-2.242-6.138-4.42-8.31l19.128-28.1C49.409 5.207 36.324-5.042 30.303 3.8 21.582 16.614 12.855 29.432 4.132 42.25a9.263 9.263 0 0 0-.856 1.56c-2.27 2.845-3.48 6.456-2.688 10.12 2.035 9.344 4.105 18.727 7.073 27.834 1.093 3.351 3.652 5.82 6.75 7.264.279.24.574.475.905.7 15.515 10.465 31.643 19.94 48.755 27.638 9.79 4.399 16.214-10.852 6.421-15.25-10.764-4.832-21.073-10.41-31.076-16.52 11.635-3.956 23.108-8.324 34.282-13.478 9.72-4.487 3.596-19.854-6.158-15.352",fill:"#fff",mask:"url(#fall_down_svg__b)"})),React.createElement("g",{transform:"translate(28 11.785)"},React.createElement("mask",{id:"fall_down_svg__d",fill:"#fff"},React.createElement("use",{xlinkHref:"#fall_down_svg__c"})),React.createElement("path",{d:"M25.305 22.773c4.826-6.055 3.743-14.814-2.416-19.557C16.73-1.526 7.834-.462 3.014 5.596-1.81 11.652-.726 20.407 5.43 25.153c6.157 4.746 15.057 3.678 19.875-2.38",fill:"#fff",mask:"url(#fall_down_svg__d)"})),React.createElement("path",{d:"m75.941 115.059-18.371-8.836a.991.991 0 0 0-1.192.263l-2.473 2.92c-.505.596-.236 1.543.498 1.75l20.845 5.917c1.212.344 1.836-1.464.693-2.014M73.811 120.394l-26.425-4.181c-.477-.076-.941.198-1.13.666l-1.684 4.182c-.296.735.215 1.55.972 1.55h28.11c1.309 0 1.451-2.012.157-2.217",fill:"#fff"})));var B="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjEyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0uMzQ1LjQwN2g3OC4yNjF2MTE3Ljc0N0guMzQ1eiIvPjxwYXRoIGlkPSJjIiBkPSJNMCAuMjUzaDI4LjMydjI3Ljg2NEgweiIvPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQzLjU3IDQuNDU4KSI+PG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTY3LjU0IDU2Ljc2NmMtMTEuMDYgNS4xMDItMjIuNDIgOS40NC0zMy45MzUgMTMuMzYxLTIuMDM1LTYuNDgxLTMuMTkyLTExLjk1My00Ljg4LTE5LjczNS0uNzAyLTMuMjMzLTIuMjQyLTYuMTM4LTQuNDItOC4zMWwxOS4xMjgtMjguMUM0OS40MDkgNS4yMDcgMzYuMzI0LTUuMDQyIDMwLjMwMyAzLjggMjEuNTgyIDE2LjYxNCAxMi44NTUgMjkuNDMyIDQuMTMyIDQyLjI1YTkuMjYzIDkuMjYzIDAgMCAwLS44NTYgMS41NmMtMi4yNyAyLjg0NS0zLjQ4IDYuNDU2LTIuNjg4IDEwLjEyIDIuMDM1IDkuMzQ0IDQuMTA1IDE4LjcyNyA3LjA3MyAyNy44MzQgMS4wOTMgMy4zNTEgMy42NTIgNS44MiA2Ljc1IDcuMjY0LjI3OS4yNC41NzQuNDc1LjkwNS43IDE1LjUxNSAxMC40NjUgMzEuNjQzIDE5Ljk0IDQ4Ljc1NSAyNy42MzggOS43OSA0LjM5OSAxNi4yMTQtMTAuODUyIDYuNDIxLTE1LjI1LTEwLjc2NC00LjgzMi0yMS4wNzMtMTAuNDEtMzEuMDc2LTE2LjUyIDExLjYzNS0zLjk1NiAyMy4xMDgtOC4zMjQgMzQuMjgyLTEzLjQ3OCA5LjcyLTQuNDg3IDMuNTk2LTE5Ljg1NC02LjE1OC0xNS4zNTIiIGZpbGw9IiNmZmYiIG1hc2s9InVybCgjYikiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjggMTEuNzg1KSI+PG1hc2sgaWQ9ImQiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2MiLz48L21hc2s+PHBhdGggZD0iTTI1LjMwNSAyMi43NzNjNC44MjYtNi4wNTUgMy43NDMtMTQuODE0LTIuNDE2LTE5LjU1N0MxNi43My0xLjUyNiA3LjgzNC0uNDYyIDMuMDE0IDUuNTk2LTEuODEgMTEuNjUyLS43MjYgMjAuNDA3IDUuNDMgMjUuMTUzYzYuMTU3IDQuNzQ2IDE1LjA1NyAzLjY3OCAxOS44NzUtMi4zOCIgZmlsbD0iI2ZmZiIgbWFzaz0idXJsKCNkKSIvPjwvZz48cGF0aCBkPSJtNzUuOTQxIDExNS4wNTktMTguMzcxLTguODM2YS45OTEuOTkxIDAgMCAwLTEuMTkyLjI2M2wtMi40NzMgMi45MmMtLjUwNS41OTYtLjIzNiAxLjU0My40OTggMS43NWwyMC44NDUgNS45MTdjMS4yMTIuMzQ0IDEuODM2LTEuNDY0LjY5My0yLjAxNE03My44MTEgMTIwLjM5NGwtMjYuNDI1LTQuMTgxYy0uNDc3LS4wNzYtLjk0MS4xOTgtMS4xMy42NjZsLTEuNjg0IDQuMTgyYy0uMjk2LjczNS4yMTUgMS41NS45NzIgMS41NWgyOC4xMWMxLjMwOSAwIDEuNDUxLTIuMDEyLjE1Ny0yLjIxNyIgZmlsbD0iI2ZmZiIvPjwvZz48L3N2Zz4=",J=a(88847),e=a(85893),C=function(n){var t=n.device,s=n.getTasks,i=function(M){z.Z.success({message:M})},l=function(){var M=[{id:t.fallId,action:30,description:"resolve"}];(0,J.ZQ)(M).then(function(){s(),i("Fall resolved")})};return(0,e.jsx)(S.Z,{title:t.name,className:"DeviceCard",children:(0,e.jsxs)(m.Z,{children:[(0,e.jsxs)(f.Z,{span:12,style:{textAlign:"center"},className:t.fall?"fall":"",children:[(0,e.jsx)(y.Z.Title,{level:5,children:"Fall Detect"}),(0,e.jsx)("div",{children:(0,e.jsx)("img",{src:B,width:70,alt:"fall"})}),t.fall&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{children:["Time: ",t.fallTime]}),(0,e.jsx)("div",{style:{textAlign:"end"},children:(0,e.jsx)(T.ZP,{className:"resolveButton",type:"primary",size:"small",onClick:l,children:"Resolve"})})]})]}),(0,e.jsx)(f.Z,{span:12,style:{textAlign:"center"},children:(0,e.jsx)(y.Z.Title,{level:5,children:"Entry/Exit Time"})}),(0,e.jsxs)(f.Z,{span:12,style:{textAlign:"center"},className:t.timeout?"fall":"",children:[(0,e.jsx)(y.Z.Title,{level:5,children:"Overtime"}),t.timeout&&(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{children:["Time: ",t.timeoutTime]})})]})]})})};C.propTypes={device:Z().object,getTasks:Z().func};var F=C,b=a(5574),x=a.n(b),o=a(68508),K=a(13013),X=a(69814),V=a(33160),$=a(39398),v=0,q=function(n){var t=n.refresh,s=(0,g.useState)(0),i=x()(s,2),l=i[0],N=i[1],M=(0,g.useState)(10),c=x()(M,2),d=c[0],I=c[1],se=(0,g.useState)(!1),w=x()(se,2),le=w[0],Q=w[1],j,re=function(u){var h=Number.parseInt(u.key);clearInterval(v),I(h),h>0&&L(h)},ie=function(u){j=j-1,N((u-j)/u*100),j<=0&&(t&&t(),j=u)},ce=function(){t&&(Q(!0),t().finally(function(){return setTimeout(function(){return Q(!1)},1e4)})),clearInterval(v),d>0&&L(d)},L=function(u){j=u,v=setInterval(function(){return ie(u)},1e3)};(0,g.useEffect)(function(){return d>0&&L(d),function(){return clearInterval(v)}},[]);var ue=(0,e.jsxs)(o.Z,{onClick:re,children:[(0,e.jsx)(o.Z.Item,{children:"Off"},"0"),(0,e.jsx)(o.Z.Item,{children:"5 secs"},"5"),(0,e.jsx)(o.Z.Item,{children:"10 secs"},"10"),(0,e.jsx)(o.Z.Item,{children:"30 secs"},"30"),(0,e.jsx)(o.Z.Item,{children:"60 secs"},"60")]});return(0,e.jsxs)("div",{className:"autoRefreshComponent",children:[(0,e.jsxs)(m.Z,{children:[(0,e.jsx)(T.ZP,{disabled:le,icon:(0,e.jsx)(V.Z,{}),style:{borderRadius:0},onClick:ce}),(0,e.jsx)(K.Z,{overlay:ue,children:(0,e.jsx)(T.ZP,{icon:(0,e.jsx)($.Z,{}),style:{borderRadius:0}})})]}),(0,e.jsx)(m.Z,{children:d>0&&(0,e.jsx)(X.Z,{percent:l,status:"active",showInfo:!1})})]})},_=q,ee=a(30381),O=a.n(ee),te=function(n,t){return t.map(function(s){var i;return(i=n.filter(function(l){return l.sponsorId===s.id}))===null||i===void 0||i.map(function(l){return l.eventName.includes("Timeout")?(s.timeout=!0,s.timeoutTime=l.startsAt):l.eventName.includes("Fall")?(s.fall=!0,s.fallTime=l.startsAt,s.fallId=l.id):l.eventName.includes("Offline")?(s.offline=!0,s.offlineTime=l.startsAt):l.eventName.includes("Abnormal")&&(s.abnormal=!0),!0}),s})},ae=function(){var n=(0,U.useModel)("dashboard"),t=n.events,s=n.objects,i=n.getTasks,l=n.newEvents,N=te(t,s);l.reverse().map(function(c){return z.Z.warning({message:"".concat(c.name," ").concat(c.eventName),description:(0,e.jsx)(R.Z,{direction:"vertical",children:c.startsAt}),duration:(O()(c.startsAt).isSame(O()(),"day"),0)})});var M=function(d){return(0,e.jsx)(m.Z,{gutter:[20,20],children:d.map(function(I){return(0,e.jsx)(f.Z,{xs:{span:24},lg:{span:12},xl:{span:8},xxl:{span:6},children:(0,e.jsx)(F,{device:I,getTasks:i})},I.id)})})};return(0,e.jsx)(Y._z,{ghost:!0,children:(0,e.jsx)(S.Z,{title:"Radar Dashboard",extra:(0,e.jsx)(_,{refresh:i}),children:M(s)})})},ne=ae}}]);
